{"version":3,"file":"DetailJs-CYrpu2RQ-agxul6C5.js","sources":["DetailJs-CYrpu2RQ.js"],"sourcesContent":["import{R as y}from\"./ShoppingCart-B9K3qvnT.js\";const L=(e,c)=>{const n=e.querySelectorAll(\".mockup_img\"),o=new Set,r=10;n.forEach((a,d)=>{let u;if(d===0){a.src=c;const l=parseInt(c.split(\"/\").pop().split(\".\")[0]);o.add(l)}else{do u=h(1,r);while(o.has(u));o.add(u),a.src=`./assets/images/Recommend/${u}.jpg`}a.onclick=()=>{P(d),v(d)}}),v(0)},P=e=>{const c=document.querySelector(\".mockup_img\"),n=document.querySelectorAll(\".td_box .mockup_img\");c.src=n[e].src},v=e=>{document.querySelectorAll(\".td_box .mockup_img\").forEach((n,o)=>{o===e?n.classList.add(\"highlighted\"):n.classList.remove(\"highlighted\")})};document.addEventListener(\"DOMContentLoaded\",function(){const e=document.querySelector(\".addcart\");e&&e.addEventListener(\"click\",A);const c=document.querySelector(\".collection\"),n=document.getElementById(\"messageContainer\");(e||c)&&(e.addEventListener(\"click\",function(t){t.preventDefault(),N(n,\"已添加购物车\")}),c.addEventListener(\"click\",function(t){t.preventDefault(),N(n,\"已收藏\")}));const o=y.getProductData();if(!o){console.error(\"No product data found.\");return}const r=document.querySelector(\".mockup_img\");r&&(r.src=\"./\"+o.image);const a=document.querySelector(\".head_span\");a&&(a.textContent=o.text);const d=document.querySelector(\".tr_two.Price\");d&&(d.textContent=o.price);const u=document.querySelector(\".tr_two.fire\");u&&T(u,5);const l=document.querySelector(\".tr_there\");if(l){const t=h(100,1e3);l.textContent=`${t} 件可售`,l.dataset.maxStock=t}const S=document.querySelector(\".td_box\");S&&L(S,r.src);const s=document.querySelector(\".i_txt\"),I=o.defaultQuantity||1;s.value=I,s&&s.addEventListener(\"input\",function(){const t=s.value.trim(),i=parseInt(l.dataset.maxStock);isNaN(t)||t<=0||t>i?s.value=1:p(s.value)});const q=document.querySelector(\".decrement\"),k=document.querySelector(\".increment\");q&&k&&(q.addEventListener(\"click\",function(){const t=parseInt(s.value);t>1&&(s.value=t-1,p(s.value))}),k.addEventListener(\"click\",function(){const t=parseInt(s.value),i=parseInt(l.dataset.maxStock);t<i&&(s.value=t+1,p(s.value))}));const x=document.querySelector(\".left_button\"),_=document.querySelector(\".right_button\");let m=0;x&&_&&(x.addEventListener(\"click\",()=>E(-1)),_.addEventListener(\"click\",()=>E(1)));const f=document.querySelector(\".there input\");f&&(f.value=b(C(I,o.price)));function E(t){const i=document.querySelectorAll(\".td_box .mockup_img\"),g=i.length;m=(m+t+g)%g;const D=document.querySelector(\".mockup_img\");D.src=i[m].src,v(m)}function p(t){const i=C(t,o.price);f&&(f.value=b(i))}function C(t,i){const g=parseFloat(i.replace(\"¥\",\"\"));return t*g}function b(t){return`¥ ${t.toFixed(2)}`}});const T=(e,c)=>{const n=\"./assets/images/Detail/fire-icon.png\",o=e.querySelectorAll(\"span\");for(let r=0;r<c;r++){const a=document.createElement(\"img\");a.src=n,a.alt=\"Fire Icon\",e.insertBefore(a,e.firstChild),r<c-1&&e.insertBefore(document.createTextNode(\" \"),e.firstChild)}for(let r=0;r<o.length;r++){const a=h(100,1e3);o[r].textContent=`${a}`}},h=(e,c)=>Math.floor(Math.random()*(c-e+1))+e;function A(e){e.preventDefault();const c=y.getProductData();if(!c){console.error(\"No product data found.\");return}const n=document.querySelector(\".i_txt\"),o=parseInt(n.value,10);if(isNaN(o)||o<=0){console.error(\"Invalid quantity.\");return}const r={...c,quantity:o};y.storePromotionData(r)}function N(e,c){const n=document.createElement(\"div\");n.className=\"message\",n.textContent=c;const o=Array.from(e.querySelectorAll(\".message\"));e.appendChild(n),o.forEach((r,a)=>{setTimeout(()=>{r.style.bottom=`${90+(o.length-a)*85}px`,console.log(\"msg.style.bottom=\"+r.style.bottom)},10)}),n.style.bottom=\"10%\",setTimeout(function(){n.style.opacity=\"0\",setTimeout(function(){n.parentNode===e?(e.removeChild(n),console.log(\"消息已移除\")):console.error(\"消息元素已经不在原来的容器中\")},500)},3e3)}\n//# sourceMappingURL=DetailJs-CYrpu2RQ.js.map\n"],"names":["L","e","c","n","a","u","l","h","P","o","A","t","N","y","T","S","s","I","i","p","q","_","E","g","D"],"mappings":"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"}