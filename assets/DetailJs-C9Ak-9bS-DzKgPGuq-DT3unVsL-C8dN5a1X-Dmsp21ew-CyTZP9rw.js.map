{"version":3,"file":"DetailJs-C9Ak-9bS-DzKgPGuq-DT3unVsL-C8dN5a1X-Dmsp21ew-CyTZP9rw.js","sources":["DetailJs-C9Ak-9bS-DzKgPGuq-DT3unVsL-C8dN5a1X-Dmsp21ew.js"],"sourcesContent":["import{R as g}from\"./ShoppingCart-DE60bMba-GFLA7zN7-GFLA7zN7-GFLA7zN7-GFLA7zN7.js\";const D=(e,n)=>{const c=e.querySelectorAll(\".mockup_img\"),o=new Set,r=10;c.forEach((s,d)=>{let a;if(d===0){s.src=n;const i=parseInt(n.split(\"/\").pop().split(\".\")[0]);o.add(i)}else{do a=S(1,r);while(o.has(a));o.add(a),s.src=`./assets/images/Recommend/${a}.jpg`}s.onclick=()=>{A(d),v(d)}}),v(0)},A=e=>{const n=document.querySelector(\".mockup_img\"),c=document.querySelectorAll(\".td_box .mockup_img\");n.src=c[e].src},v=e=>{document.querySelectorAll(\".td_box .mockup_img\").forEach((n,c)=>{c===e?n.classList.add(\"highlighted\"):n.classList.remove(\"highlighted\")})};document.addEventListener(\"DOMContentLoaded\",function(){const e=document.querySelector(\".addcart\");e&&e.addEventListener(\"click\",P);const n=document.querySelector(\".collection\"),c=document.getElementById(\"messageContainer\");(e||n)&&(e.addEventListener(\"click\",function(t){t.preventDefault(),I(c,\"已添加购物车\")}),n.addEventListener(\"click\",function(t){t.preventDefault(),I(c,\"已收藏\")}));const o=g.getProductData();if(!o){console.error(\"No product data found.\");return}const r=document.querySelector(\".mockup_img\");r&&(r.src=\"./\"+o.image);const s=document.querySelector(\".head_span\");s&&(s.textContent=o.text);const d=document.querySelector(\".tr_two.Price\");d&&(d.textContent=o.price);const a=document.querySelector(\".tr_two.fire\");a&&$(a,5);const i=document.querySelector(\".tr_there\");if(i){const t=S(100,1e3);i.textContent=`${t} 件可售`,i.dataset.maxStock=t}const q=document.querySelector(\".td_box\");q&&D(q,r.src);const l=document.querySelector(\".i_txt\"),h=o.defaultQuantity||1;l.value=h,l&&l.addEventListener(\"input\",function(){const t=l.value.trim(),u=parseInt(i.dataset.maxStock);isNaN(t)||t<=0||t>u?l.value=1:y(l.value)});const _=document.querySelector(\".decrement\"),k=document.querySelector(\".increment\");_&&k&&(_.addEventListener(\"click\",function(){const t=parseInt(l.value);t>1&&(l.value=t-1,y(l.value))}),k.addEventListener(\"click\",function(){const t=parseInt(l.value),u=parseInt(i.dataset.maxStock);t<u&&(l.value=t+1,y(l.value))}));const x=document.querySelector(\".left_button\"),E=document.querySelector(\".right_button\");let m=0;x&&E&&(x.addEventListener(\"click\",()=>L(-1)),E.addEventListener(\"click\",()=>L(1)));const f=document.querySelector(\".there input\");f&&(f.value=b(C(h,o.price)));function L(t){const u=document.querySelectorAll(\".td_box .mockup_img\"),p=u.length;m=(m+t+p)%p;const N=document.querySelector(\".mockup_img\");N.src=u[m].src,v(m)}function y(t){const u=C(t,o.price);f&&(f.value=b(u))}function C(t,u){const p=parseFloat(u.replace(\"¥\",\"\"));return t*p}function b(t){return`¥ ${t.toFixed(2)}`}});const $=(e,n)=>{const c=\"./assets/images/Detail/fire-icon.png\",o=e.querySelectorAll(\"span\");for(let r=0;r<n;r++){const s=document.createElement(\"img\");s.src=c,s.alt=\"Fire Icon\",e.insertBefore(s,e.firstChild),r<n-1&&e.insertBefore(document.createTextNode(\" \"),e.firstChild)}for(let r=0;r<o.length;r++){const s=S(100,1e3);o[r].textContent=`${s}`}},S=(e,n)=>Math.floor(Math.random()*(n-e+1))+e;function P(e){e.preventDefault();const n=g.getProductData();if(!n){console.error(\"No product data found.\");return}const c=document.querySelector(\".i_txt\"),o=parseInt(c.value,10);if(isNaN(o)||o<=0){console.error(\"Invalid quantity.\");return}const r={...n,quantity:o};g.storePromotionData(r)}function I(e,n){const c=document.createElement(\"div\");c.className=\"message\",c.textContent=n;const o=Array.from(e.querySelectorAll(\".message\"));e.appendChild(c),o.forEach((r,s)=>{setTimeout(()=>{r.style.bottom=`${90+(o.length-s)*85}px`,console.log(\"msg.style.bottom=\"+r.style.bottom)},10)}),c.style.bottom=\"10%\",setTimeout(function(){c.style.opacity=\"0\",setTimeout(function(){c.parentNode===e?(e.removeChild(c),console.log(\"消息已移除\")):console.error(\"消息元素已经不在原来的容器中\")},500)},3e3)}\n//# sourceMappingURL=DetailJs-C9Ak-9bS-DzKgPGuq-DT3unVsL-C8dN5a1X-Dmsp21ew.js.map\n"],"names":["e","t","g","r","l","u"],"mappings":"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"}