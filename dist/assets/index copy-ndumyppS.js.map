{"version":3,"mappings":"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","names":["contentContainer","bottomNavbar","footContainer","backToTopBtn","currentStylesheets","currentScripts","currentRoute","cssGlob","__vitePreload","n","jsGlob","loadCSS","href","resolve","reject","link","unloadCSS","sheet","loadJS","src","module","error","unloadJS","script","loadPage","route","url","routes","response","html","cssFiles","getCSSFilesForRoute","jsFiles","getJSFilesForRoute","oldCssFiles","oldJsFiles","cssFile","jsFile","registry","path","initRouter","event","target","section","sectionDiv","title","ul","li","a","returnTopImg","hrElement","returnBottomImg"],"ignoreList":[],"sources":["../../src/components/index copy.js"],"sourcesContent":["// src/components/index.js\r\nimport routes from '../router/router.js';\r\nimport registry from './registry.js';\r\n\r\nimport '@/stores/reception.js';\r\nimport '@/components/Home/Home.js';\r\nimport '@/components/Mine/Mine.js';\r\nimport '@/components/Serve/Serve.js';\r\nimport '@/components/ShoppingCart/ShoppingCart.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    // 获取 DOM 元素\r\n    const contentContainer = document.getElementById('content');\r\n    const bottomNavbar = document.getElementById('bottom-navbar');\r\n    const footContainer = document.getElementById('foot_container');\r\n    const backToTopBtn = document.getElementById('top_btn');\r\n\r\n    // 存储当前加载的 CSS 和 JS 文件\r\n    let currentStylesheets = [];\r\n    let currentScripts = [];\r\n    let currentRoute = null; // 记录当前页面的路由\r\n\r\n    // 获取所有可能的 CSS 文件路径\r\n    const cssGlob = import.meta.glob('/src/style/**/**/*.css');\r\n    // 获取所有可能的 JS 文件路径\r\n    const jsGlob = import.meta.glob('/src/components/**/**/*.js');\r\n\r\n    // 加载 CSS 文件\r\n    async function loadCSS(href) {\r\n        return new Promise((resolve, reject) => {\r\n            const link = document.createElement('link');\r\n            link.rel = 'stylesheet';\r\n            link.href = href;\r\n            link.onload = resolve;\r\n            link.onerror = reject;\r\n            document.head.appendChild(link);\r\n            currentStylesheets.push(link);\r\n        });\r\n    }\r\n\r\n    // 卸载 CSS 文件\r\n    function unloadCSS(href) {\r\n        currentStylesheets = currentStylesheets.filter(sheet => {\r\n            if (sheet.href === href) {\r\n                sheet.remove();\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n\r\n    // 动态加载 JS 文件\r\n    async function loadJS(src) {\r\n        try {\r\n            const module = await jsGlob[src]();\r\n            console.log(`Loaded JS file: ${src}`, module);\r\n        } catch (error) {\r\n            console.error(`Failed to load JS file \"${src}\":`, error);\r\n        }\r\n    }\r\n\r\n    // 卸载 JS 文件\r\n    function unloadJS(src) {\r\n        currentScripts = currentScripts.filter(script => {\r\n            if (script.src === src) {\r\n                script.remove();\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n\r\n    // 加载页面内容\r\n    async function loadPage(route) {\r\n        const url = routes[route];\r\n        if (!url) {\r\n            console.error(`Route \"${route}\" not found.`);\r\n            return;\r\n        }\r\n\r\n        // 清除当前内容\r\n        if (contentContainer) {\r\n            contentContainer.innerHTML = '';\r\n        } else {\r\n            console.error(\"Element with id 'content' not found.\");\r\n            return;\r\n        }\r\n\r\n        // 发送 AJAX 请求获取页面内容\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n            console.error(`Failed to load page \"${route}\": ${response.statusText}`);\r\n            return;\r\n        }\r\n\r\n        const html = await response.text();\r\n        contentContainer.innerHTML = html;\r\n\r\n        // 获取页面对应的 CSS 和 JS 文件路径\r\n        const cssFiles = getCSSFilesForRoute(route);\r\n        const jsFiles = getJSFilesForRoute(route);\r\n\r\n        // 如果有当前页面的路由，卸载旧的 CSS 和 JS 文件并销毁当前页面\r\n        if (currentRoute) {\r\n            const oldCssFiles = getCSSFilesForRoute(currentRoute);\r\n            const oldJsFiles = getJSFilesForRoute(currentRoute);\r\n\r\n            oldCssFiles.forEach(cssFile => unloadCSS(cssFile));\r\n            oldJsFiles.forEach(jsFile => unloadJS(jsFile));\r\n\r\n            await registry.destroyPage(currentRoute);\r\n        }\r\n\r\n        // 加载新的 CSS 和 JS 文件\r\n        await Promise.all(cssFiles.map(loadCSS));\r\n        await Promise.all(jsFiles.map(loadJS));\r\n\r\n        // 初始化新页面\r\n        await registry.initPage(route);\r\n\r\n        // 更新当前页面的路由\r\n        currentRoute = route;\r\n    }\r\n\r\n    // 获取页面对应的 CSS 文件路径\r\n    function getCSSFilesForRoute(route) {\r\n        const cssFiles = [];\r\n        for (const path in cssGlob) {\r\n            if (path.includes(`/src/style/${route}/${route}.css`)) {\r\n                cssFiles.push(path);\r\n            }\r\n        }\r\n        return cssFiles;\r\n    }\r\n\r\n    // 获取页面对应的 JS 文件路径\r\n    function getJSFilesForRoute(route) {\r\n        const jsFiles = [];\r\n        for (const path in jsGlob) {\r\n            if (path.includes(`/src/components/${route}/${route}.js`)) {\r\n                jsFiles.push(path);\r\n            }\r\n        }\r\n        return jsFiles;\r\n    }\r\n\r\n    // 初始化路由\r\n    function initRouter() {\r\n        // 默认加载首页\r\n        loadPage('Home');\r\n\r\n        // 添加底部导航栏点击事件\r\n        if (bottomNavbar) {\r\n            bottomNavbar.addEventListener('click', (event) => {\r\n                const target = event.target.closest('.nav-item');\r\n                if (target && target.dataset.route) {\r\n                    const route = target.dataset.route;\r\n                    loadPage(route);\r\n                }\r\n            });\r\n        } else {\r\n            console.error(\"Element with id 'bottom-navbar' not found.\");\r\n        }\r\n    }\r\n\r\n    // 启动路由\r\n    initRouter();\r\n\r\n    // 处理 footer 部分\r\n    if (footContainer) {\r\n        const sections = [\r\n            {\r\n                title: '新手指南',\r\n                links: [\r\n                    { text: '注册账户', to: '/' },\r\n                    { text: '平台功能', to: '/' },\r\n                    { text: '在线交易', to: '/' },\r\n                    { text: '买家保障', to: '/' },\r\n                ],\r\n            },\r\n            {\r\n                title: '产品服务',\r\n                links: [\r\n                    { text: '找供应', to: '/' },\r\n                    { text: '找采购', to: '/' },\r\n                    { text: '看行情', to: '/' },\r\n                    { text: '发布供应', to: '/' },\r\n                    { text: '一件代发', to: '/' },\r\n                ],\r\n            },\r\n            {\r\n                title: '合作联系',\r\n                links: [\r\n                    { text: '客户服务 800-888-8888', to: '/' },\r\n                    { text: '商务洽谈 0123-88888888', to: '/' },\r\n                    { text: '媒体合作 0123-88888888', to: '/' },\r\n                    { text: 'Fist Mall 知识产权综合服务平台', to: '/' },\r\n                    { text: 'Fist Mall 乡村振兴合作专区', to: '/' },\r\n                ],\r\n            },\r\n            {\r\n                title: '关于我们',\r\n                links: [\r\n                    { text: '关于我们', to: '/' },\r\n                    { text: 'Fist 大事件', to: '/' },\r\n                    { text: '服务协议', to: '/' },\r\n                    { text: '隐私政策', to: '/' },\r\n                    { text: '规则说明', to: '/' },\r\n                ],\r\n            },\r\n        ];\r\n\r\n        // 创建并插入每个 section\r\n        sections.forEach(section => {\r\n            const sectionDiv = document.createElement('div');\r\n            sectionDiv.className = 'section';\r\n\r\n            const title = document.createElement('h2');\r\n            title.textContent = section.title;\r\n            sectionDiv.appendChild(title);\r\n\r\n            const ul = document.createElement('ul'); // 修改为 'ul' 而不是 'navbar_ul'\r\n            section.links.forEach(link => {\r\n                const li = document.createElement('li');\r\n                const a = document.createElement('a');\r\n                a.href = link.to;\r\n                a.textContent = link.text;\r\n                li.appendChild(a);\r\n                ul.appendChild(li);\r\n            });\r\n\r\n            sectionDiv.appendChild(ul);\r\n            footContainer.appendChild(sectionDiv);\r\n        });\r\n    } else {\r\n        console.error(\"Element with id 'foot_container' not found.\");\r\n    }\r\n\r\n    // 处理返回顶部按钮\r\n    if (backToTopBtn) {\r\n        // 创建 return_top 图像元素\r\n        const returnTopImg = document.createElement('img');\r\n        returnTopImg.src = '/assets/return-top.png';\r\n        returnTopImg.className = 'return_top';\r\n\r\n        // 创建水平线元素\r\n        const hrElement = document.createElement('hr');\r\n\r\n        // 创建 return_bottom 图像元素\r\n        const returnBottomImg = document.createElement('img');\r\n        returnBottomImg.src = '/assets/return-bottom.png';\r\n        returnBottomImg.className = 'return_bottom';\r\n\r\n        // 将创建的元素添加到按钮中\r\n        backToTopBtn.appendChild(returnTopImg);\r\n        backToTopBtn.appendChild(hrElement);\r\n        backToTopBtn.appendChild(returnBottomImg);\r\n\r\n        window.addEventListener('scroll', function () {\r\n            if (window.scrollY > 450) { // 设置触发显示按钮的滚动距离\r\n                backToTopBtn.classList.remove('hidden');\r\n            } else {\r\n                backToTopBtn.classList.add('hidden');\r\n            }\r\n        });\r\n\r\n        // 添加点击事件监听器，点击后平滑滚动到顶部\r\n        returnTopImg.addEventListener('click', function (event) {\r\n            event.stopPropagation(); // 阻止事件冒泡，避免触发父元素的点击事件\r\n            window.scrollTo({\r\n                top: 0,\r\n                behavior: 'smooth' // 平滑滚动\r\n            });\r\n        });\r\n\r\n        // 添加点击事件监听器，点击后平滑滚动到底部\r\n        returnBottomImg.addEventListener('click', function (event) {\r\n            event.stopPropagation(); // 阻止事件冒泡，避免触发父元素的点击事件\r\n            window.scrollTo({\r\n                top: document.documentElement.scrollHeight, // 获取整个文档的高度\r\n                behavior: 'smooth' // 平滑滚动\r\n            });\r\n        });\r\n\r\n        // 如果你希望点击整个按钮默认行为是回到顶部，可以保留这个监听器\r\n        backToTopBtn.addEventListener('click', function () {\r\n            window.scrollTo({\r\n                top: 0,\r\n                behavior: 'smooth' // 平滑滚动\r\n            });\r\n        });\r\n    } else {\r\n        console.error(\"Element with id 'top_btn' not found.\");\r\n    }\r\n});"],"file":"assets/index copy-ndumyppS.js"}